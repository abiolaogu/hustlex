# =============================================================================
# HustleX Backend Configuration
# =============================================================================
# Copy this file to .env and fill in the values
# DO NOT commit .env to version control

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_ENV=development                    # development, staging, production
APP_NAME=HustleX
APP_PORT=8080
APP_HOST=0.0.0.0
APP_DEBUG=true
APP_URL=http://localhost:8080

# API versioning
API_VERSION=v1
API_PREFIX=/api

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
DB_HOST=localhost
DB_PORT=5432
DB_NAME=hustlex
DB_USER=hustlex_user
DB_PASSWORD=your_secure_password_here
DB_SSLMODE=disable                     # disable, require, verify-full
DB_TIMEZONE=Africa/Lagos

# Connection pool settings
DB_MAX_OPEN_CONNS=100
DB_MAX_IDLE_CONNS=10
DB_CONN_MAX_LIFETIME=3600              # seconds

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=10

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
JWT_SECRET=your_very_long_jwt_secret_key_at_least_32_characters
JWT_ACCESS_EXPIRY=15m                  # Access token expiry
JWT_REFRESH_EXPIRY=168h                # Refresh token expiry (7 days)
JWT_ISSUER=hustlex-api

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# Encryption key for sensitive data (32 bytes for AES-256)
ENCRYPTION_KEY=your_32_byte_encryption_key_here

# CORS settings
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOWED_HEADERS=Origin,Content-Type,Accept,Authorization,X-Request-ID

# Rate limiting
RATE_LIMIT_REQUESTS=100                # requests per minute per IP
RATE_LIMIT_WINDOW=60                   # window in seconds

# -----------------------------------------------------------------------------
# Payment Gateways
# -----------------------------------------------------------------------------
# Paystack (Primary)
PAYSTACK_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxx
PAYSTACK_PUBLIC_KEY=pk_test_xxxxxxxxxxxxxxxxxxxx
PAYSTACK_WEBHOOK_SECRET=whk_xxxxxxxxxxxxxxxx
PAYSTACK_BASE_URL=https://api.paystack.co

# Flutterwave (Backup)
FLUTTERWAVE_SECRET_KEY=FLWSECK_TEST-xxxxxxxxxx
FLUTTERWAVE_PUBLIC_KEY=FLWPUBK_TEST-xxxxxxxxxx
FLUTTERWAVE_ENCRYPTION_KEY=FLWSECK_TESTxxxxxxxx
FLUTTERWAVE_WEBHOOK_SECRET=whk_xxxxxxxxxxxxxxxx
FLUTTERWAVE_BASE_URL=https://api.flutterwave.com/v3

# Default payment provider
DEFAULT_PAYMENT_PROVIDER=paystack      # paystack, flutterwave

# -----------------------------------------------------------------------------
# SMS Gateway
# -----------------------------------------------------------------------------
# Termii (Primary for Nigeria)
TERMII_API_KEY=your_termii_api_key
TERMII_SENDER_ID=HustleX
TERMII_BASE_URL=https://api.ng.termii.com/api

# Africa's Talking (Backup)
AT_API_KEY=your_africastalking_api_key
AT_USERNAME=sandbox                    # sandbox or your username
AT_SENDER_ID=HustleX
AT_BASE_URL=https://api.africastalking.com/version1

# Default SMS provider
DEFAULT_SMS_PROVIDER=termii            # termii, africastalking

# -----------------------------------------------------------------------------
# Push Notifications
# -----------------------------------------------------------------------------
# Firebase Cloud Messaging
FCM_PROJECT_ID=hustlex-app
FCM_CREDENTIALS_FILE=/path/to/firebase-credentials.json

# APNs (Apple Push Notification service) - for direct iOS if needed
APNS_KEY_ID=your_key_id
APNS_TEAM_ID=your_team_id
APNS_KEY_FILE=/path/to/apns-key.p8
APNS_BUNDLE_ID=com.hustlex.app
APNS_PRODUCTION=false

# -----------------------------------------------------------------------------
# Email Service
# -----------------------------------------------------------------------------
# SendGrid
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxx
SENDGRID_FROM_EMAIL=noreply@hustlex.ng
SENDGRID_FROM_NAME=HustleX

# SMTP (Alternative)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your_smtp_user
SMTP_PASSWORD=your_smtp_password
SMTP_FROM_EMAIL=noreply@hustlex.ng
SMTP_FROM_NAME=HustleX
SMTP_TLS=true

# Default email provider
DEFAULT_EMAIL_PROVIDER=sendgrid        # sendgrid, smtp

# -----------------------------------------------------------------------------
# File Storage
# -----------------------------------------------------------------------------
# AWS S3
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=eu-west-1
AWS_S3_BUCKET=hustlex-uploads

# Cloudinary (Alternative)
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# Default storage provider
DEFAULT_STORAGE_PROVIDER=s3            # s3, cloudinary, local

# Local storage (development only)
LOCAL_STORAGE_PATH=./uploads

# -----------------------------------------------------------------------------
# Background Jobs
# -----------------------------------------------------------------------------
# Job processing
WORKER_CONCURRENCY=5
JOB_RETRY_ATTEMPTS=3
JOB_RETRY_DELAY=60                     # seconds

# Scheduled jobs
CRON_SAVINGS_CONTRIBUTION=0 9 * * *    # Daily at 9 AM WAT
CRON_LOAN_REMINDER=0 8 * * *           # Daily at 8 AM WAT
CRON_CREDIT_SCORE_UPDATE=0 0 * * 0     # Weekly on Sunday midnight

# -----------------------------------------------------------------------------
# External APIs
# -----------------------------------------------------------------------------
# BVN Verification (VerifyMe, Smile Identity, etc.)
VERIFYME_API_KEY=your_verifyme_api_key
VERIFYME_BASE_URL=https://vapi.verifyme.ng/v1

# Bank verification
MONO_SECRET_KEY=your_mono_secret_key
MONO_BASE_URL=https://api.withmono.com

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_LOANS_ENABLED=true
FEATURE_SAVINGS_CIRCLES_ENABLED=true
FEATURE_P2P_TRANSFERS_ENABLED=true
FEATURE_LEARNING_ENABLED=false         # Coming soon
FEATURE_TRIBES_ENABLED=false           # Coming soon

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
# Logging
LOG_LEVEL=debug                        # debug, info, warn, error
LOG_FORMAT=json                        # json, text
LOG_OUTPUT=stdout                      # stdout, file
LOG_FILE_PATH=/var/log/hustlex/app.log

# Metrics (Prometheus)
METRICS_ENABLED=true
METRICS_PORT=9090

# Tracing (Jaeger)
TRACING_ENABLED=false
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831

# Sentry (Error tracking)
SENTRY_DSN=https://xxxx@sentry.io/xxxx
SENTRY_ENVIRONMENT=development

# -----------------------------------------------------------------------------
# Business Configuration
# -----------------------------------------------------------------------------
# Wallet limits (in Kobo - 100 kobo = ₦1)
WALLET_MIN_DEPOSIT=10000               # ₦100
WALLET_MAX_DEPOSIT=1000000000          # ₦10,000,000
WALLET_MIN_WITHDRAWAL=50000            # ₦500
WALLET_MAX_WITHDRAWAL=500000000        # ₦5,000,000
WALLET_DAILY_TRANSFER_LIMIT=100000000  # ₦1,000,000

# Credit/Loan configuration
MIN_CREDIT_SCORE_FOR_LOAN=300
MIN_LOAN_AMOUNT=500000                 # ₦5,000
MAX_LOAN_AMOUNT=50000000               # ₦500,000
LOAN_INTEREST_RATE_MONTHLY=5           # 5% monthly
LOAN_PROCESSING_FEE_PERCENT=2          # 2% processing fee
LOAN_DEFAULT_GRACE_DAYS=3

# Savings configuration
MIN_SAVINGS_CONTRIBUTION=100000        # ₦1,000
MAX_CIRCLE_MEMBERS=30

# Gig marketplace
MIN_GIG_BUDGET=100000                  # ₦1,000
PLATFORM_FEE_PERCENT=10                # 10% platform fee
ESCROW_RELEASE_DELAY_HOURS=24

# -----------------------------------------------------------------------------
# Development Only
# -----------------------------------------------------------------------------
# Test phone numbers that auto-verify with OTP "123456"
TEST_PHONE_NUMBERS=+2348000000001,+2348000000002

# Seed database on startup
SEED_DATABASE=false

# Enable API documentation
SWAGGER_ENABLED=true
SWAGGER_PATH=/docs
